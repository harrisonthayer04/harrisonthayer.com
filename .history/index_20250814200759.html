<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Harrison Thayer's Cave</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ‘¾</text></svg>">
    <script>(function(){
        try{
            var k='theme';
            var s=localStorage.getItem(k);
            if(s){document.documentElement.setAttribute('data-theme',s);} 
            // Disable smooth scroll until after load to prevent initial auto-scroll
            document.documentElement.classList.add('no-smooth');
            window.addEventListener('load', function(){
                // Only re-enable if there's no hash in URL; if there is, respect it
                if(!location.hash){
                    window.scrollTo({top:0,left:0,behavior:'auto'});
                }
                document.documentElement.classList.remove('no-smooth');
            });
        }catch(e){}
    })();</script>
    <link rel="stylesheet" href="styles.css">
    <meta name="description" content="Portfolio">
</head>
<body>
    <nav class="top-nav warpable" aria-label="Primary">
        <div class="nav-content">
            <a href="#about" class="nav-btn">About</a>
            <a href="#projects" class="nav-btn">Projects</a>
            <a href="#photos" class="nav-btn">Photos</a>
            <a href="#connect" class="nav-btn">Connect</a>
            
        </div>
    </nav>
    <main>
        <h1 class="warpable">
            <span id="typing" class="typing" aria-label="Harrison Thayer's personal portfolio"></span>
        </h1>
    </main>
    <section id="about" aria-label="About">
        <h2>About</h2>
        <p></p>
    </section>
    <section id="projects" aria-label="Projects">
        <h2>Projects</h2>
        <p></p>
    </section>
    <section id="photos" aria-label="Photos">
        <h2>Photos</h2>
        <p></p>
    </section>
    <section id="connect" aria-label="Connect">
        <h2>Connect</h2>
        <p></p>
    </section>
    <button id="theme-toggle" class="theme-toggle warpable" type="button" aria-haspopup="true" aria-expanded="false" aria-controls="theme-panel" aria-live="polite" aria-label="Open theme settings"></button>
    <div id="theme-panel" class="theme-panel" role="dialog" aria-modal="false" aria-label="Theme settings">
        <div class="row">
            <span class="label">Theme</span>
            <button class="mode-btn" data-mode="light" aria-pressed="false">Light</button>
            <button class="mode-btn" data-mode="dark" aria-pressed="false">Dark</button>
        </div>
        <div class="row">
            <span class="label">Accent</span>
            <button class="accent-chip" data-color="#111111" style="background:#111111" aria-pressed="false" title="Black"></button>
            <button class="accent-chip" data-color="#e11d48" style="background:#e11d48" aria-pressed="false" title="Rose"></button>
            <button class="accent-chip" data-color="#2563eb" style="background:#2563eb" aria-pressed="false" title="Blue"></button>
            <button class="accent-chip" data-color="#16a34a" style="background:#16a34a" aria-pressed="false" title="Green"></button>
            <input id="accent-picker" class="accent-picker" type="color" aria-label="Custom accent color" value="#111111" />
        </div>
    </div>
    <script>
    (function(){
        var root = document.documentElement;
        var btn = document.getElementById('theme-toggle');
        var panel = document.getElementById('theme-panel');
        var modeBtns = panel ? panel.querySelectorAll('.mode-btn') : [];
        var accentChips = panel ? panel.querySelectorAll('.accent-chip') : [];
        var picker = document.getElementById('accent-picker');
        if(!btn || !panel) return;

        function load() {
            var savedTheme = localStorage.getItem('theme');
            var savedAccent = localStorage.getItem('accent');
            var theme = savedTheme || (matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
            setTheme(theme);
            setAccent(savedAccent || getComputedStyle(root).getPropertyValue('--fg').trim());
        }
        function setTheme(theme){
            root.setAttribute('data-theme', theme);
            try{ localStorage.setItem('theme', theme);}catch(e){}
            setPressed(modeBtns, '[data-mode="'+theme+'"]');
            btn.textContent = 'Theme';
        }
        function setAccent(color){
            root.style.setProperty('--fg', color);
            try{ localStorage.setItem('accent', color);}catch(e){}
            setPressed(accentChips, '[data-color="'+color.toLowerCase()+'"]');
            if(picker) picker.value = toHex(color);
        }
        function toHex(color){
            var ctx = document.createElement('canvas').getContext('2d');
            ctx.fillStyle = color; return rgbToHex(ctx.fillStyle);
        }
        function rgbToHex(rgb){
            var m = rgb.match(/\d+/g)||[]; if(m.length<3) return '#111111';
            return '#'+m.slice(0,3).map(function(n){
                var h = (parseInt(n,10)||0).toString(16).padStart(2,'0');
                return h;
            }).join('');
        }
        function setPressed(list, selector){
            list.forEach(function(el){ el.setAttribute('aria-pressed','false'); });
            var active = panel.querySelector(selector);
            if(active) active.setAttribute('aria-pressed','true');
        }

        function openPanel(){ panel.classList.add('open'); btn.setAttribute('aria-expanded','true'); }
        function closePanel(){ panel.classList.remove('open'); btn.setAttribute('aria-expanded','false'); }
        btn.addEventListener('click', function(){
            if(panel.classList.contains('open')) closePanel(); else openPanel();
        });
        document.addEventListener('click', function(e){ if(!panel.contains(e.target) && e.target!==btn){ closePanel(); } });

        modeBtns.forEach(function(m){ m.addEventListener('click', function(){ setTheme(m.getAttribute('data-mode')); }); });
        accentChips.forEach(function(c){ c.addEventListener('click', function(){ setAccent(c.getAttribute('data-color')); }); });
        if(picker){ picker.addEventListener('input', function(){ setAccent(picker.value); }); }

        load();
    })();
    </script>
    <script>
    (function(){
        var root = document.documentElement;
        var strength = 0.06; // scale factor amplitude
        var raf = null;
        var sx = 1, sy = 1;
        function onMove(e){
            var x = e.clientX, y = e.clientY;
            var cx = window.innerWidth/2, cy = window.innerHeight/2;
            var dx = (x - cx) / cx; // -1..1
            var dy = (y - cy) / cy; // -1..1
            sx = 1 + (dx * strength);
            sy = 1 + (dy * strength);
            if(!raf){ raf = requestAnimationFrame(apply); }
        }
        function apply(){
            raf = null;
            root.style.setProperty('--sx', sx.toFixed(3));
            root.style.setProperty('--sy', sy.toFixed(3));
        }
        window.addEventListener('pointermove', onMove);
        window.addEventListener('mouseleave', function(){ sx = 1; sy = 1; if(!raf){ raf = requestAnimationFrame(apply);} });
        try{ if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) { window.removeEventListener('pointermove', onMove); root.style.setProperty('--sx','1'); root.style.setProperty('--sy','1'); }}catch(e){}
    })();
    </script>
    <script>
    (function () {
        var el = document.getElementById('typing');
        if (!el) return;
        var text = "Harrison Thayer's personal portfolio";
        var reduce = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        if (reduce) {
            el.textContent = text;
            el.classList.remove('caret');
            return;
        }
        var i = 0;
        (function step(){
            if (i <= text.length) {
                el.textContent = text.slice(0, i);
                i++;
                setTimeout(step, 50);
            } else {
                // Keep caret visible at end after typing completes
                el.classList.add('caret');
            }
        })();
    })();
    </script>
</body>
</html>